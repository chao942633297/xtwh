

<include file="Public/head" />

<div>
    <!--<a href="{:U('Admin/Goods/add')}" style="margin-left:10px;width:100px;" type="button" class="btn btn-primary">添加产品</a>-->
</div>
<div style="margin:10px;">
    <div style="margin:10px;margin-top:10px;margin-left: 900px">
        <input style="height:36px;" type="text" size="24px" placeholder="输入要搜索的手机号" id="phone" />
        <button style="margin-left:10px;width:100px;" class="btn btn-primary" onclick="searchUser();">查询</button>
    </div>
    <div style="margin:10px;float:right;margin-top:-45px;">
        <select class="form-control" style="width:50%;height:36px;display:inline;border-radius:2px;" name="" id="cash">
            <option value="">请选择支付状态</option>
            <option value="1">待提现</option>
            <option value="2">已提现</option>
        </select>
        <button style="margin-left:10px;width:100px;" class="btn btn-primary" onclick="searchUser();">查询</button>
    </div>
</div>
<div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="userlist" style="padding-right: 20px;">
        <table id="jqGrid" style="width: 100%;"></table>
        <div id="jqGridPager"></div>
    </div>
    <div role="tabpanel" class="tab-pane" id="edituser">
    </div>
</div>

<include file="Public/footer" />
<script type="text/javascript">
    function  formatLink(id) {
        return "<a href='cashApply/id/"+id+"' class='btn btn-primary' style='margin-right:5px;'>审核</a>";
    }
    function judge(status){
        if(status==1){
            return '<font color="red">待提现</font>'
        }
        return '<font color="green">已提现</font>'
    }
    function searchUser(){
        var phone=$('#phone').val();
        var status=$('#cash').val();
        var data={
            phone:phone,
            status:status,
        };
        $.ajax({
            url:"{:U('GetCash/searchCashList')}",
            type:'GET',
            data:data,
            dataType:'json',
            success:function(returndata){
                $("#jqGrid").clearGridData();
                $("#jqGrid").jqGrid('setGridParam', { data: returndata});
                $("#jqGrid").trigger('reloadGrid');
            }
        });
    }
    $(document).ready(function($) {
        $("#jqGrid").jqGrid({
            styleUI : 'Bootstrap',
            colModel: [
                { label: '编号', name: 'id',width:'80'},
                { label: '昵称', name: 'nickname',width:'100'},
                { label: '真实姓名', name: 'name',width:'100'},
                { label: '手机号', name: 'phone',width:'100' },
                { label: '提现金额', name: 'cash_money',width:'100' },
                { label: '到账金额', name: 'get_money',width:'100' },
                { label: '提现方式', name: 'cash_style',width:'100' },
                { label: '收款人', name: 'payee',width:'100' },
                { label: '收款账号', name: 'payee_account',width:'100' },
                { label: '申请提现时间', name: 'createtime',width:'100' },
                { label: '状态', name: 'status',width:'100' ,formatter:judge},
                { label: '操作', name: 'id',width:100,formatter: formatLink}
            ],
            viewrecords: true,
            rownumbers: true,
            rownumWidth: 35,
            height: document.documentElement.clientHeight-135,
            autowidth:true,
            rowNum: 9,
            datatype: 'local',
            loadonce:true,
            pager: "#jqGridPager"
        });
        $("#jqGrid").jqGrid('setGridParam', { data: eval({$data})});
        $("#jqGrid").trigger('reloadGrid');


    });
</script>